<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    {% for stylesheet in page.extra_css %}
        <link rel="stylesheet" href="{{ stylesheet | relative_url }}">
    {% endfor %}
</head>
<body class="{{ page.body_class }} {{ layout.body_class }}">
    
    <header class="site-header">
        <div class="header-content">
            <a href="{{ '/' | relative_url }}" class="site-logo" style="text-decoration:none;">
                <img src="{{ '/assets/thumbnails/guild-icon.png' | relative_url }}" class="guild-icon" style="height:30px; margin-right:10px;" onerror="this.style.display='none'">
                {{ site.title | default: "Coconut Codex" }}
            </a>
            
            <button id="theme-toggle" class="tool-btn" aria-label="Toggle Dark Mode" style="margin-left:auto;">
                <span class="icon-text">ðŸŒ— Theme</span>
            </button>
        </div>
    </header>

    <main class="page-content">
        {{ content }}
    </main>
    
    <footer class="site-footer">
        <div class="footer-content">
        </div>
    </footer>

    <script>
    (function() {
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        htmlElement.setAttribute('data-theme', currentTheme);
        
        function toggleTheme() {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            htmlElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
    })();
    </script>
</body>
</html>